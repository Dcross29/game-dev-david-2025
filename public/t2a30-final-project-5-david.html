<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Correct T Hallway - Full Collision</title>

<style>
body { margin:0; overflow:hidden; background:#bcbcbc; font-family:sans-serif; }

/* ===== VISUAL HALLWAY OUTLINES ===== */
.outline {
  position: absolute;
  border: 3px solid black;
  pointer-events: none;
}

/* Vertical stem */
#stem {
  width: 220px;
  height: 520px;
  left: 50%;
  bottom: 0;
  transform: translateX(-50%);
}

/* Horizontal bar - FULL WIDTH */
#bar {
  width: 100vw;
  height: 220px;
  left: 0;
  top: 240px;
}

/* ===== PLAYER ===== */
#player {
  position: absolute;
  width: 48px;
  height: 48px;
  left: 50%;
  bottom: 40px;
  transform: translateX(-50%);
}

/* ===== GOOBER ===== */
#goober {
  position: absolute;
  width: 120px;
  height: 120px;
  left: 50%;
  top: 260px;
  transform: translateX(-50%);
}

/* ===== DOORS ===== */
.door {
  position: absolute;
  width: 100px;
  height: 150px;
  background: #aaa;
  border: 6px solid #333;
}

#doorLeft { top: 260px; left: 0; }
#doorRight { top: 260px; right: 0; }
</style>
</head>

<body>

<!-- VISUAL HALLWAY OUTLINES -->
<div id="stem" class="outline"></div>
<div id="bar" class="outline"></div>

<img id="player" src="mc.png">
<img id="goober" src="goober.gif">

<div id="doorLeft" class="door"></div>
<div id="doorRight" class="door"></div>

<script>
const player = document.getElementById("player");
const speed = 5;

let px = window.innerWidth / 2 - 24;
let py = window.innerHeight - 90;

/* ===== T SHAPE DEFINITION ===== */
function insideHallway(x, y, w, h) {
  const cx = x; // left
  const cy = y; // top
  const right = x + w;
  const bottom = y + h;

  // vertical stem
  const stem = {
    left: window.innerWidth / 2 - 110,
    right: window.innerWidth / 2 + 110,
    top: window.innerHeight - 520,
    bottom: window.innerHeight
  };

  // horizontal bar full width
  const bar = {
    left: 0,
    right: window.innerWidth,
    top: 240,
    bottom: 460
  };

  // check for overlap of entire player rectangle with either stem or bar
  const inStem =
    right > stem.left &&
    cx < stem.right &&
    bottom > stem.top &&
    cy < stem.bottom;

  const inBar =
    right > bar.left &&
    cx < bar.right &&
    bottom > bar.top &&
    cy < bar.bottom;

  return inStem || inBar;
}

/* ===== PLAYER MOVEMENT ===== */
document.addEventListener("keydown", e => {
  let nx = px;
  let ny = py;

  if (e.key === "w") ny -= speed;
  if (e.key === "s") ny += speed;
  if (e.key === "a") nx -= speed;
  if (e.key === "d") nx += speed;

  // check collision using full sprite rectangle
  if (insideHallway(nx, ny, player.offsetWidth, player.offsetHeight)) {
    px = nx;
    py = ny;
  }

  player.style.left = px + "px";
  player.style.top = py + "px";
});
</script>

</body>
</html>
