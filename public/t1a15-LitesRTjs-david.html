
<!DOCTYPE html>
<html>
  <body>
 <h1 align=center>t1a15-LitesRTjs-david.html</h1>
    <video id="video" autoplay playsinline width="320" height="240"></video>
    <canvas id="canvas" width="320" height="240"></canvas>
    <div id="output">Loading model...</div>

    <script src="public/edge-impulse-standalone.js"></script>
    <script>
      async function main() {
        // Load model
        const classifier = await EdgeImpulseClassifier.create({
          wasmPath: "edge-impulse-standalone.wasm"
        });
        document.getElementById('output').innerText = "Model ready! Starting webcam...";

        // Start webcam
        const video = document.getElementById('video');
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
        video.srcObject = stream;

        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        // Detect loop
        async function detectFrame() {
          ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
          const result = await classifier.detect(canvas);

          // Draw boxes
          for (const obj of result.results) {
            ctx.beginPath();
            ctx.rect(obj.x, obj.y, obj.width, obj.height);
            ctx.lineWidth = 2;
            ctx.strokeStyle = 'red';
            ctx.fillStyle = 'red';
            ctx.stroke();
            ctx.fillText(`${obj.label} (${(obj.value * 100).toFixed(1)}%)`, obj.x, obj.y - 4);
          }

          requestAnimationFrame(detectFrame);
        }
        detectFrame();
      }

      main();
    </script>
  </body>
</html>
