<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Final Level - Floor 1</title>
<style>
body{
  margin:0;
  overflow:hidden;
  background:#7a4a1c;
  font-family:arial;
}
#player{
  position:absolute;
  width:50px;
  z-index:10;
}
#bed{
  position:absolute;
  left:60px;
  bottom:40px;
  width:180px;
  height:50px;
  background:#5a2d0c;
  border-radius:10px;
}
#bed:before{
  content:"";
  position:absolute;
  width:180px;
  height:25px;
  top:-25px;
  background:#c68642;
  border-radius:10px 10px 0 0;
}
#stairs{
  position:absolute;
  right:80px;
  bottom:0;
  width:160px;
  height:120px;
}
#stairs div{
  height:18px;
  background:#3b1f0b;
  margin-top:4px;
}
#dialogue{
  position:fixed;
  bottom:30px;
  left:50%;
  transform:translateX(-50%);
  background:rgba(0,0,0,.85);
  padding:15px 25px;
  color:white;
  border-radius:12px;
  display:none;
  z-index:100;
}
</style>
</head>
<body>

<div id="bed"></div>
<div id="stairs"><div></div><div></div><div></div><div></div><div></div></div>
<img id="player" src="mc.PNG">

<div id="dialogue"></div>

<script>
const player = document.getElementById("player");
const stairs = document.getElementById("stairs");
const dialogue = document.getElementById("dialogue");

let keys = {};
document.addEventListener("keydown", e => keys[e.key.toLowerCase()] = true);
document.addEventListener("keyup", e => keys[e.key.toLowerCase()] = false);

let px=120, py=70;
player.onload = () => { player.style.left=px+"px"; player.style.bottom=py+"px"; }

setInterval(()=>{
  if(keys.a) px-=4;
  if(keys.d) px+=4;
  if(keys.w) py+=4;
  if(keys.s) py-=4;
  px = Math.max(0, Math.min(window.innerWidth-player.width, px));
  py = Math.max(0, py);
  player.style.left=px+"px";
  player.style.bottom=py+"px";
  checkStairs();
},16);

function checkStairs(){
  const stairsRect = {left:stairs.offsetLeft,right:stairs.offsetLeft+stairs.offsetWidth,top:stairs.offsetTop,bottom:stairs.offsetTop+stairs.offsetHeight};
  const playerRect = {left:px,right:px+player.naturalWidth,top:py,bottom:py+player.naturalHeight};
  if(!(playerRect.right<stairsRect.left || playerRect.left>stairsRect.right || playerRect.bottom<stairsRect.top || playerRect.top>stairsRect.bottom)){
    showDialogue(`<button onclick="goDown()">Go downstairs</button>`);
  }else hideDialogue();
}

function goDown(){
  window.location.href="secondfloor.html";
}

function showDialogue(html){dialogue.innerHTML=html; dialogue.style.display="block";}
function hideDialogue(){dialogue.style.display="none";}
</script>

</body>
</html>
